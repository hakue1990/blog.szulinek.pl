<!doctype html><html lang=pl dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Docker Nextcloud | IT Tech Anytime</title><meta name=keywords content="nextcloud,web,toturial"><meta name=description content="czyli własna chmura"><meta name=author content><link rel=canonical href=https://canonical.url/to/page><link crossorigin=anonymous href=/assets/css/stylesheet.cb2ba463b21cd55ccebc7e63bb8cfa6b32887f84b96fdab5a1fa38e91370b35b.css integrity="sha256-yyukY7Ic1VzOvH5ju4z6azKIf4S5b9q1ofo46RNws1s=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://szulinek.pl/assets/favicon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://szulinek.pl/assets/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://szulinek.pl/favicon-32x32.png><link rel=apple-touch-icon href=https://szulinek.pl/assets/favicon/apple-touch-icon.png><link rel=mask-icon href=https://szulinek.pl/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://szulinek.pl/en/posts/docker-nextcloud/><link rel=alternate hreflang=pl href=https://szulinek.pl/pl/posts/docker-nextcloud/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Docker Nextcloud"><meta property="og:description" content="czyli własna chmura"><meta property="og:type" content="article"><meta property="og:url" content="https://szulinek.pl/pl/posts/docker-nextcloud/"><meta property="og:image" content="https://szulinek.pl/img/blog/nc.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-08-07T17:41:15+02:00"><meta property="article:modified_time" content="2023-08-07T17:41:15+02:00"><meta property="og:site_name" content="IT Tech Anytime"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://szulinek.pl/img/blog/nc.jpg"><meta name=twitter:title content="Docker Nextcloud"><meta name=twitter:description content="czyli własna chmura"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":4,"name":"Docker Nextcloud","item":"https://szulinek.pl/pl/posts/docker-nextcloud/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Docker Nextcloud","name":"Docker Nextcloud","description":"czyli własna chmura","keywords":["nextcloud","web","toturial"],"articleBody":"Czym jest Nextcloud? Nextcloud to doskonałe rozwiązanie jako samodzielnie hostowana alternatywa dla Google Drive lub Dropbox.\nNie zamierzam ci mówić, dlaczego powinieneś używać Nextcloud. Zamiast tego, pokażę ci, jak zainstalować serwer Nextcloud za pomocą kontenerów Dockerowych.\nPoradnik wykorzystuje konfigurację reverse proxy Nginx, dzięki której możesz wdrożyć swoją instancję Nextcloud z SSL. W ten sposób adres URL Twojego wdrożenia Nextcloud będzie używał protokołu HTTPS, a transfer plików będzie odbywał się w sposób bezpieczny.\nPod koniec poradnika podzielę się kilkoma wskazówkami dla użytkowników chmury Linode w celu zmniejszenia wysiłku przy wdrażaniu Nextcloud. Wymagania wstępne\nZanim przejdziemy dalej, musisz się upewnić, że pewne rzeczy są załatwione. Oto czego potrzebujesz:\nSerwer Linux Zainstalowany Docker wraz z Docker Compose Zarejestrowana domena Wdrażanie serwera Nextcloud z Dockerem na reverse proxy Zobaczmy kroki jeden po drugim.\nKrok 1: Skonfiguruj odwrócone proxy Dzięki reverse proxy możesz wdrożyć wiele usług sieciowych na tym samym serwerze.jest to koniczeczne bo potrzebujesz kontenera Let’s Encrypt do obsługi SSL.\nIstnieją dwie metody konfiguracji odwróconego proxy Nginx.\nWdrożenie odwróconego proxy powinno być przeprowadzone za pomocą oddzielnego pliku Compose, abyś mógł uruchamiać lub aktualizować usługi sieciowe bez zakłócania konfiguracji odwróconego proxy.\nJuż przygotowałem pliki Compose w naszym publicznym repozytorium GitHub. Ponieważ nie jest to szczegółowy artykuł o wdrożeniu odwróconego proxy, nie będę zagłębiał się w szczegóły pliku Compose.\nMożesz użyć gita lub wget, aby pobrać pliki. Jeśli używasz gita, sklonuj całe repozytorium:\ngit clone https://github.com/linuxhandbook/tutorial-snippets \u0026\u0026 cd tutorial-snippets/Reverse_Proxy\nW przeciwnym razie po prostu pobierz niezbędne pliki:\nSą tutaj trzy pliki:\nenv.example: nazwij go .env i zmień DEFAULT_EMAIL na swój adres e-mail. max_upload_size.conf: Ten plik zapewnia, że ​​możesz przesyłać pliki o wielkości nawet 1 GB (domyślnie 2 MB). docker-compose.yaml: Największy z nich wszystkich. Omówiony krótko w następnym akapicie. Utwórz sieć Docker o nazwie net. Będzie ona używana w pliku docker-compose.yaml.\ndocker network create net Plik docker-compose wygląda następująco:\nversion: \"3.3\" services: NginxProxy: image: \"jwilder/nginx-proxy:latest\" volumes: - \"NPhtml:/usr/share/nginx/html\" - \"NPdhparam:/etc/nginx/dhparam\" - \"NPvhost:/etc/nginx/vhost.d\" - \"NPcerts:/etc/nginx/certs:ro\" - \"/var/run/docker.sock:/tmp/docker.sock:ro\" - \"./client_max_upload_size.conf:/etc/nginx/conf.d/client_max_upload_size.conf\" labels: - \"com.github.jrcs.letsencrypt_nginx_proxy_companion.nginx_proxy\" restart: \"on-failure\" networks: [\"net\"] ports: - \"80:80\" - \"443:443\" LetsencryptCompanion: image: \"jrcs/letsencrypt-nginx-proxy-companion:latest\" volumes: - \"LCacme:/etc/acme.sh\" - \"NPvhost:/etc/nginx/vhost.d\" - \"NPcerts:/etc/nginx/certs\" - \"NPhtml:/usr/share/nginx/html\" - \"/var/run/docker.sock:/var/run/docker.sock:ro\" environment: - DEFAULT_EMAIL depends_on: [\"NginxProxy\"] restart: \"on-failure\" networks: [\"net\"] volumes: NPhtml: NPdhparam: NPvhost: NPcerts: LCacme: networks: net: external: true Nareszcie, wdrożdeplot kontenerów\ndocker-compose up -d Po pomyślnym wdrożeniu, przy próbie odwiedzenia adresu IP serwera, na którym znajduje się nasze reverse proxy zoabczysz poniższy komuniktat.\nJest okej - nie wdrożyliśmy jeszcze żadnych apliakcji webowych.\nKrok 2: Deploy NextCloud dwie składowe to: jedna to baza danych, druga to samo Nextcloud, albo raczej nazwijmy go frontem.\nDla backendowej bazy danych, każda baza oparta na MySQL będzie działać. Wybieram MariaDB, zwłaszcza znacznik (wersję) obrazu 10.5.9.\nDla Nextcloud, użyję wersji 21.0.0, jest to najnowsza wersja w chwili pisania tego artykułu.\nDlatego obrazy używane to\nmariadb:10.5.9 nextcloud:21.0.0 Jeśli używasz tego tutorialu w przyszłości i istnieje nowsza wersja Nextcloud i MariaDB, użyj tych wersji.\n","wordCount":"474","inLanguage":"pl","image":"https://szulinek.pl/img/blog/nc.jpg","datePublished":"2023-08-07T17:41:15+02:00","dateModified":"2023-08-07T17:41:15+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://szulinek.pl/pl/posts/docker-nextcloud/"},"publisher":{"@type":"Organization","name":"IT Tech Anytime","logo":{"@type":"ImageObject","url":"https://szulinek.pl/assets/favicon/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://szulinek.pl/pl/ accesskey=h title="Szulinek.pl (Alt + H)"><img src=https://szulinek.pl/img/coding.png alt aria-label=logo height=35>Szulinek.pl</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://szulinek.pl/en/ title=English aria-label=:en:>En</a></li></ul></div></div><ul id=menu><li><a href=https://szulinek.pl/pl/about title="O mnie"><span>O mnie</span></a></li><li><a href=https://szulinek.pl/pl/services/ title=Usługi><span>Usługi</span></a></li><li><a href=https://szulinek.pl/pl/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://szulinek.pl/pl/archives/ title=Archiwa><span>Archiwa</span></a></li><li><a href=https://szulinek.pl/pl/contact/ title=Kontakt><span>Kontakt</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://szulinek.pl/pl/>Strona Główna</a></div><h1 class=post-title>Docker Nextcloud</h1><div class=post-description>czyli własna chmura</div><div class=post-meta><span title='2023-08-07 17:41:15 +0200 CEST'>sierpnia 7, 2023</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;474 słów&nbsp;|&nbsp;Tłumaczenia:<ul class=i18n_list><li><a href=https://szulinek.pl/en/posts/docker-nextcloud/>En</a></li></ul></div></header><figure class=entry-cover><img loading=lazy src=https://szulinek.pl/img/blog/nc.jpg alt=nextcloud></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Spis treści</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#czym-jest-nextcloud>Czym jest Nextcloud?</a></li><li><a href=#wdrażanie-serwera-nextcloud-z-dockerem-na-reverse-proxy>Wdrażanie serwera Nextcloud z Dockerem na reverse proxy</a><ul><li><a href=#krok-1-skonfiguruj-odwrócone-proxy>Krok 1: Skonfiguruj odwrócone proxy</a></li><li><a href=#krok-2-deploy-nextcloud>Krok 2: Deploy NextCloud</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h2 id=czym-jest-nextcloud>Czym jest Nextcloud?<a hidden class=anchor aria-hidden=true href=#czym-jest-nextcloud>#</a></h2><p>Nextcloud to doskonałe rozwiązanie jako samodzielnie hostowana alternatywa dla <strong>Google Drive</strong> lub <strong>Dropbox</strong>.</p><p>Nie zamierzam ci mówić, dlaczego powinieneś używać Nextcloud. Zamiast tego, pokażę ci, jak zainstalować serwer Nextcloud za pomocą kontenerów Dockerowych.</p><p>Poradnik wykorzystuje konfigurację reverse proxy Nginx, dzięki której możesz wdrożyć swoją instancję <strong>Nextcloud z SSL</strong>. W ten sposób adres URL Twojego wdrożenia Nextcloud będzie używał protokołu HTTPS, a transfer plików będzie odbywał się w sposób bezpieczny.</p><p>Pod koniec poradnika podzielę się kilkoma wskazówkami dla użytkowników chmury Linode w celu zmniejszenia wysiłku przy wdrażaniu Nextcloud.
Wymagania wstępne</p><p>Zanim przejdziemy dalej, musisz się upewnić, że pewne rzeczy są załatwione. Oto czego potrzebujesz:</p><ul><li>Serwer Linux</li><li>Zainstalowany Docker wraz z Docker Compose</li><li>Zarejestrowana domena</li></ul><h2 id=wdrażanie-serwera-nextcloud-z-dockerem-na-reverse-proxy>Wdrażanie serwera Nextcloud z Dockerem na reverse proxy<a hidden class=anchor aria-hidden=true href=#wdrażanie-serwera-nextcloud-z-dockerem-na-reverse-proxy>#</a></h2><p>Zobaczmy kroki jeden po drugim.</p><h3 id=krok-1-skonfiguruj-odwrócone-proxy>Krok 1: Skonfiguruj odwrócone proxy<a hidden class=anchor aria-hidden=true href=#krok-1-skonfiguruj-odwrócone-proxy>#</a></h3><p>Dzięki reverse proxy możesz wdrożyć wiele usług sieciowych na tym samym serwerze.jest to koniczeczne bo potrzebujesz kontenera <strong>Let&rsquo;s Encrypt</strong> do obsługi <strong>SSL</strong>.</p><p>Istnieją dwie metody konfiguracji odwróconego proxy Nginx.</p><p>Wdrożenie odwróconego proxy powinno być przeprowadzone za pomocą oddzielnego pliku Compose, abyś mógł uruchamiać lub aktualizować usługi sieciowe bez zakłócania konfiguracji odwróconego proxy.</p><p>Już przygotowałem pliki Compose w naszym publicznym repozytorium GitHub. Ponieważ nie jest to szczegółowy artykuł o wdrożeniu odwróconego proxy, nie będę zagłębiał się w szczegóły pliku Compose.</p><p>Możesz użyć gita lub wget, aby pobrać pliki. Jeśli używasz gita, sklonuj całe repozytorium:</p><p>git clone <a href=https://github.com/linuxhandbook/tutorial-snippets>https://github.com/linuxhandbook/tutorial-snippets</a> &&<br>cd tutorial-snippets/Reverse_Proxy</p><p>W przeciwnym razie po prostu pobierz niezbędne pliki:</p><p>Są tutaj trzy pliki:</p><ul><li><strong>env.example:</strong> nazwij go .env i zmień DEFAULT_EMAIL na swój adres <strong>e-mail</strong>.</li><li><strong>max_upload_size.conf:</strong> Ten plik zapewnia, że ​​możesz przesyłać pliki o wielkości nawet 1 GB (domyślnie 2 MB).</li><li><strong>docker-compose.yaml:</strong> Największy z nich wszystkich. Omówiony krótko w następnym akapicie.</li></ul><p>Utwórz sieć <strong>Docker</strong> o nazwie <strong>net</strong>. Będzie ona używana w pliku <strong>docker-compose.yaml</strong>.</p><pre tabindex=0><code>docker network create net
</code></pre><p>Plik docker-compose wygląda <strong>następująco:</strong></p><pre tabindex=0><code>version: &#34;3.3&#34;

services:

    NginxProxy:
        image: &#34;jwilder/nginx-proxy:latest&#34;

        volumes:
            - &#34;NPhtml:/usr/share/nginx/html&#34;
            - &#34;NPdhparam:/etc/nginx/dhparam&#34;
            - &#34;NPvhost:/etc/nginx/vhost.d&#34;
            - &#34;NPcerts:/etc/nginx/certs:ro&#34;
            - &#34;/var/run/docker.sock:/tmp/docker.sock:ro&#34;
            - &#34;./client_max_upload_size.conf:/etc/nginx/conf.d/client_max_upload_size.conf&#34;

        labels:
            - &#34;com.github.jrcs.letsencrypt_nginx_proxy_companion.nginx_proxy&#34;
        restart: &#34;on-failure&#34;
        networks: [&#34;net&#34;]

        ports:
            - &#34;80:80&#34;
            - &#34;443:443&#34;

    LetsencryptCompanion:
        image: &#34;jrcs/letsencrypt-nginx-proxy-companion:latest&#34;

        volumes:
            - &#34;LCacme:/etc/acme.sh&#34;
            - &#34;NPvhost:/etc/nginx/vhost.d&#34;
            - &#34;NPcerts:/etc/nginx/certs&#34;
            - &#34;NPhtml:/usr/share/nginx/html&#34;
            - &#34;/var/run/docker.sock:/var/run/docker.sock:ro&#34;

        environment:
            - DEFAULT_EMAIL

        depends_on: [&#34;NginxProxy&#34;]
        restart: &#34;on-failure&#34;
        networks: [&#34;net&#34;]


volumes:
    NPhtml:
    NPdhparam:
    NPvhost:
    NPcerts:
    LCacme:

networks:
    net:
        external: true
</code></pre><p>Nareszcie, wdrożdeplot kontenerów</p><pre tabindex=0><code>docker-compose up -d
</code></pre><p>Po pomyślnym wdrożeniu, przy próbie odwiedzenia adresu IP serwera, na którym znajduje się nasze reverse proxy zoabczysz poniższy komuniktat.</p><p><img loading=lazy src=/img/blog/503-nextcloud-reverse-proxy.webp alt="Alt text of image" title="Image title"></p><p>Jest <strong>okej</strong> - nie wdrożyliśmy jeszcze żadnych apliakcji webowych.</p><h3 id=krok-2-deploy-nextcloud>Krok 2: Deploy NextCloud<a hidden class=anchor aria-hidden=true href=#krok-2-deploy-nextcloud>#</a></h3><p>dwie składowe to: jedna to baza danych, druga to samo Nextcloud, albo raczej nazwijmy go frontem.</p><p>Dla backendowej bazy danych, każda baza oparta na MySQL będzie działać.
Wybieram MariaDB, zwłaszcza znacznik (wersję) obrazu 10.5.9.</p><p>Dla Nextcloud, użyję wersji 21.0.0, jest to najnowsza wersja w chwili pisania tego artykułu.</p><p>Dlatego obrazy używane to</p><pre tabindex=0><code>mariadb:10.5.9
nextcloud:21.0.0
</code></pre><p>Jeśli używasz tego tutorialu w przyszłości i istnieje nowsza wersja Nextcloud i MariaDB, użyj tych wersji.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://szulinek.pl/pl/tags/nextcloud/>nextcloud</a></li><li><a href=https://szulinek.pl/pl/tags/web/>web</a></li><li><a href=https://szulinek.pl/pl/tags/toturial/>toturial</a></li></ul><nav class=paginav><a class=next href=https://szulinek.pl/pl/posts/mysql-cheatsheet/><span class=title>Następna »</span><br><span>Mysql Cheatsheet</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://szulinek.pl/pl/>IT Tech Anytime</a></span>
<span>Powered by
<a href=https://szulinek.pl rel="noopener noreferrer" target=_blank>szulinek.pl</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Kopiuj";function s(){t.innerHTML="Skopiowano!",setTimeout(()=>{t.innerHTML="Kopiuj"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script src=/js/custom.js></script></body></html>